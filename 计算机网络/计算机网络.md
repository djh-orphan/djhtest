# 计算机网络

## 1.socket  创建套接字

协议栈分配存储空间   写入初始状态 应用程序拿到描述符可以知道套接字的地址

## 2.connect 连接操作

创建tcp头部  客户端将该信息发送到服务端 服务端找到对应的套接字后 写入相应信息。 接着将信息发回客户端 若连接成功，向套接字中写入服务器的ip 端口号信息。

<u>注：浏览器、邮件一般使用TCP  DNS查询等收发较短控制数据时用UDP</u>

### TCP头部信息：

![微信图片_20210317114217](C:\Users\段duan\Desktop\微信图片_20210317114217.jpg)

<u>注意：**序号字段**只有在下面两种情况的任意一种才有意义：</u>

- <u>数据字段至少包含一个字节</u>
- <u>这是一个 SYN 段，或者是 FIN 段，或者是 RST 段。</u>

<u>*只有当 ACK 标志位被置位的时候，确认号这个字段才有效。*</u>

### 下图：TCP在连接操作时的三次握手 （连接的实际操作）

<img src="C:\Users\段duan\AppData\Local\Temp\WeChat Files\ae009a6e75878e40862c9f1d3884590.png" alt="ae009a6e75878e40862c9f1d3884590" style="zoom:50%;" />

TCP模块会根据网络包的平均往返时间动态的调整ACK号的等待时间。

### 使用窗口管理ACK号

![249400428401711953](C:\Users\段duan\AppData\Local\Temp\WeChat Files\249400428401711953.jpg)

接受方接收到数据包后，会将数据包放置在缓存区中，